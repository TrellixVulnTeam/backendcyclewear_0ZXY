{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProyectosProductivos\\\\backendcyclewear\\\\backend\\\\src\\\\components\\\\auth\\\\loginTabset.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect, useRef } from \"react\";\nimport { Tabs, TabList, TabPanel, Tab } from \"react-tabs\";\nimport { User, Unlock } from \"react-feather\";\nimport { withRouter, useHistory } from \"react-router-dom\";\nimport { Button, Form, FormGroup, Input, Label } from \"reactstrap\";\nimport { validateEmail } from \"../../utilities/Validations\";\nimport swal from \"sweetalert\"; //Firebase\n\nimport firebase from \"../../utilities/firebase\";\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, updateProfile } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginTabset = () => {\n  _s();\n\n  const history = useHistory();\n  const [formData, setFormData] = useState(defaultValueForm());\n  const [formError, setFormError] = useState({});\n  const [user, setUser] = useState(false);\n  const [idUid, setIdUid] = useState(0);\n  const [createId, setCreateId] = useState(false);\n\n  const clickActive = event => {\n    document.querySelector(\".nav-link\").classList.remove(\"show\");\n    event.target.classList.add(\"show\");\n  };\n\n  const onChange = e => {\n    console.log(\"VALOR E : \", e);\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const registrarse = async e => {\n    console.log(\"VALIDAR DATOS\");\n    return;\n    e.preventDefault();\n    setFormError({});\n    let errors = {};\n    let formOk = true;\n    console.log(\"DATOS : \", formData);\n    return;\n\n    if (!validateEmail(formData.usuario)) {\n      swal({\n        title: \"Registro Usuarios\",\n        text: \"Ingresa un email valido!\",\n        icon: \"warning\",\n        button: \"Aceptar\"\n      });\n      errors.usuario = true;\n      formOk = false;\n      return;\n    }\n\n    if (formData.contraseña.length < 8) {\n      swal({\n        title: \"Registro Usuarios\",\n        text: \"Password debe ser masyor a siete (7) caracteres!\",\n        icon: \"warning\",\n        button: \"Aceptar\"\n      });\n      errors.password = true;\n      formOk = false;\n      return;\n    }\n\n    if (formData.contraseña != formData.confirmarcontraseña) {\n      swal({\n        title: \"Registro Usuarios\",\n        text: \"Contraseña y confirmar contraseña, son diferentes!\",\n        icon: \"warning\",\n        button: \"Aceptar\"\n      });\n      errors.password = true;\n      formOk = false;\n      return;\n    } //console.log(\"VALOR FORMDATA : \", formOk);\n    //Consulta en la BD de MR para ver si el email esta asociado a una cuenta\n\n\n    const emailusuario = {\n      usuario: formData.usuario\n    }; //const respuestauser = await ReadUserEmail.getReadUsersEmail(\n    //  emailusuario\n    //);\n    ///console.log(\"SI USUARIO EXISTE : \", respuestauser);\n\n    /*\r\n    \t\tif (respuestauser.length > 0) {\r\n    \t\t\tswal({\r\n    \t\t\t\ttitle: \"Registro Usuarios\",\r\n    \t\t\t\ttext: \"Por favor revisa el email, ya esta asignado a otra cuenta!\",\r\n    \t\t\t\ticon: \"warning\",\r\n    \t\t\t\tbutton: \"Aceptar\",\r\n    \t\t\t});\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t*/\n\n    setFormError(errors);\n\n    if (formOk) {\n      //setLoading(true);\n      //console.log(\"DATOS USAURIO : \", formData);\n      //console.log(formData.password);\n      const grabaUsuario = async () => {\n        const auth = getAuth(firebase);\n        createUserWithEmailAndPassword(auth, formData.usuario, formData.contraseña).then(userCredential => {\n          // Signed in\n          const user = userCredential.user; //console.log(\"USER CREDENTIAL : \", user);\n\n          const auth = getAuth(firebase);\n          onAuthStateChanged(auth, user => {\n            if (user) {\n              //alert(\"ENTRE\")\n              const datos = {\n                uid: user.metadata.createdAt,\n                medio: \"\"\n              };\n              setIdUid(user.metadata.createdAt);\n              setUser(true);\n              updateProfile(auth.currentUser, {\n                displayName: formData.nombre,\n                photoURL: \"\"\n              }).then(() => {\n                swal({\n                  title: \"Actualizar Usuarios\",\n                  text: \"Nombre Usuario Actualizado de forma correcta!\",\n                  icon: \"success\",\n                  button: \"Aceptar\"\n                });\n                createUser(user.metadata.createdAt);\n                setCreateId(true);\n              }).catch(error => {\n                swal({\n                  title: \"Actualizar Usuarios\",\n                  text: \"Error Actualizando nombre de Usuario!\",\n                  icon: \"error\",\n                  button: \"Aceptar\"\n                });\n              });\n            } else {\n              setUser(false);\n            }\n          });\n        }).catch(error => {\n          const errorCode = error.code;\n          const errorMessage = error.message;\n          swal({\n            title: \"Registro Usuarios\",\n            text: \"Error al crear la cuenta!\",\n            icon: \"error\",\n            button: \"Aceptar\"\n          });\n        });\n      };\n\n      grabaUsuario();\n    }\n\n    return;\n  };\n\n  const createUser = async iDUser => {\n    console.log(\"Procedimiento para crear usuario en BD\");\n  };\n\n  const routeChange = () => {//history.push(`${process.env.PUBLIC_URL}/dashboard`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        children: /*#__PURE__*/_jsxDEV(TabPanel, {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onChange: onChange,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-horizontal auth-form\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"usuario\",\n                  type: \"email\",\n                  className: \"form-control\",\n                  placeholder: \"Ingrese usuario\",\n                  id: \"exampleInputEmail12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"contrase\\xF1a\",\n                  type: \"password\",\n                  className: \"form-control\",\n                  placeholder: \"Contrase\\xF1a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"confirmarcontrase\\xF1a\",\n                  type: \"password\",\n                  className: \"form-control\",\n                  placeholder: \"Confirmar Contrase\\xF1a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-terms\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"custom-control custom-checkbox mr-sm-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Input, {\n                    type: \"checkbox\",\n                    className: \"custom-control-input\",\n                    id: \"customControlAutosizing\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(Label, {\n                    className: \"d-block\",\n                    children: [/*#__PURE__*/_jsxDEV(Input, {\n                      className: \"checkbox_animated\",\n                      id: \"chk-ani2\",\n                      type: \"checkbox\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 12\n                    }, this), \"Acepto t\\xE9rminos y condiciones\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: \"/#\",\n                        children: \"Terms & Condiciones\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-button\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  color: \"primary\",\n                  onClick: () => prueba(),\n                  children: \"Registrarse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LoginTabset, \"wasAUF+8at81j3U8bGGq+8bH/WU=\", false, function () {\n  return [useHistory];\n});\n\n_c = LoginTabset;\n\nfunction defaultValueForm() {\n  return {\n    usuario: \"\",\n    contraseña: \"\",\n    confirmarcontraseña: \"\"\n  };\n}\n\nexport default _c2 = withRouter(LoginTabset);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginTabset\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/ProyectosProductivos/backendcyclewear/backend/src/components/auth/loginTabset.js"],"names":["React","Fragment","useState","useEffect","useRef","Tabs","TabList","TabPanel","Tab","User","Unlock","withRouter","useHistory","Button","Form","FormGroup","Input","Label","validateEmail","swal","firebase","getAuth","signInWithEmailAndPassword","createUserWithEmailAndPassword","onAuthStateChanged","updateProfile","LoginTabset","history","formData","setFormData","defaultValueForm","formError","setFormError","user","setUser","idUid","setIdUid","createId","setCreateId","clickActive","event","document","querySelector","classList","remove","target","add","onChange","e","console","log","name","value","registrarse","preventDefault","errors","formOk","usuario","title","text","icon","button","contraseña","length","password","confirmarcontraseña","emailusuario","grabaUsuario","auth","then","userCredential","datos","uid","metadata","createdAt","medio","currentUser","displayName","nombre","photoURL","createUser","catch","error","errorCode","code","errorMessage","message","iDUser","routeChange","prueba"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useRef } from \"react\";\r\nimport { Tabs, TabList, TabPanel, Tab } from \"react-tabs\";\r\nimport { User, Unlock } from \"react-feather\";\r\nimport { withRouter, useHistory } from \"react-router-dom\";\r\nimport { Button, Form, FormGroup, Input, Label } from \"reactstrap\";\r\nimport { validateEmail } from \"../../utilities/Validations\";\r\nimport swal from \"sweetalert\";\r\n\r\n//Firebase\r\nimport firebase from \"../../utilities/firebase\";\r\nimport {\r\n\tgetAuth,\r\n\tsignInWithEmailAndPassword,\r\n\tcreateUserWithEmailAndPassword,\r\n\tonAuthStateChanged,\r\n\tupdateProfile,\r\n} from \"firebase/auth\";\r\n\r\nconst LoginTabset = () => {\r\n\tconst history = useHistory();\r\n\tconst [formData, setFormData] = useState(defaultValueForm());\r\n\tconst [formError, setFormError] = useState({});\r\n\tconst [user, setUser] = useState(false);\r\n\tconst [idUid, setIdUid] = useState(0);\r\n\tconst [createId, setCreateId] = useState(false);\r\n\r\n\tconst clickActive = (event) => {\r\n\t\tdocument.querySelector(\".nav-link\").classList.remove(\"show\");\r\n\t\tevent.target.classList.add(\"show\");\r\n\t};\r\n\r\n\tconst onChange = (e) => {\r\n\t\tconsole.log(\"VALOR E : \", e)\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst registrarse = async (e) => {\r\n\t\tconsole.log(\"VALIDAR DATOS\");\r\n\r\n\t\treturn;\r\n\t\te.preventDefault();\r\n\t\tsetFormError({});\r\n\t\tlet errors = {};\r\n\t\tlet formOk = true;\r\n\t\tconsole.log(\"DATOS : \", formData);\r\n\r\n\t\treturn;\r\n\t\tif (!validateEmail(formData.usuario)) {\r\n\t\t\tswal({\r\n\t\t\t\ttitle: \"Registro Usuarios\",\r\n\t\t\t\ttext: \"Ingresa un email valido!\",\r\n\t\t\t\ticon: \"warning\",\r\n\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t});\r\n\t\t\terrors.usuario = true;\r\n\t\t\tformOk = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (formData.contraseña.length < 8) {\r\n\t\t\tswal({\r\n\t\t\t\ttitle: \"Registro Usuarios\",\r\n\t\t\t\ttext: \"Password debe ser masyor a siete (7) caracteres!\",\r\n\t\t\t\ticon: \"warning\",\r\n\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t});\r\n\t\t\terrors.password = true;\r\n\t\t\tformOk = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (formData.contraseña != formData.confirmarcontraseña) {\r\n\t\t\tswal({\r\n\t\t\t\ttitle: \"Registro Usuarios\",\r\n\t\t\t\ttext: \"Contraseña y confirmar contraseña, son diferentes!\",\r\n\t\t\t\ticon: \"warning\",\r\n\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t});\r\n\t\t\terrors.password = true;\r\n\t\t\tformOk = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//console.log(\"VALOR FORMDATA : \", formOk);\r\n\t\t//Consulta en la BD de MR para ver si el email esta asociado a una cuenta\r\n\t\tconst emailusuario = {\r\n\t\t\tusuario: formData.usuario,\r\n\t\t};\r\n\r\n\t\t//const respuestauser = await ReadUserEmail.getReadUsersEmail(\r\n\t\t//  emailusuario\r\n\t\t//);\r\n\t\t///console.log(\"SI USUARIO EXISTE : \", respuestauser);\r\n\t\t/*\r\n\t\t\t\tif (respuestauser.length > 0) {\r\n\t\t\t\t\tswal({\r\n\t\t\t\t\t\ttitle: \"Registro Usuarios\",\r\n\t\t\t\t\t\ttext: \"Por favor revisa el email, ya esta asignado a otra cuenta!\",\r\n\t\t\t\t\t\ticon: \"warning\",\r\n\t\t\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\tsetFormError(errors);\r\n\r\n\t\tif (formOk) {\r\n\t\t\t//setLoading(true);\r\n\t\t\t//console.log(\"DATOS USAURIO : \", formData);\r\n\t\t\t//console.log(formData.password);\r\n\r\n\t\t\tconst grabaUsuario = async () => {\r\n\t\t\t\tconst auth = getAuth(firebase);\r\n\t\t\t\tcreateUserWithEmailAndPassword(\r\n\t\t\t\t\tauth,\r\n\t\t\t\t\tformData.usuario,\r\n\t\t\t\t\tformData.contraseña\r\n\t\t\t\t)\r\n\t\t\t\t\t.then((userCredential) => {\r\n\t\t\t\t\t\t// Signed in\r\n\t\t\t\t\t\tconst user = userCredential.user;\r\n\t\t\t\t\t\t//console.log(\"USER CREDENTIAL : \", user);\r\n\t\t\t\t\t\tconst auth = getAuth(firebase);\r\n\r\n\t\t\t\t\t\tonAuthStateChanged(auth, (user) => {\r\n\t\t\t\t\t\t\tif (user) {\r\n\t\t\t\t\t\t\t\t//alert(\"ENTRE\")\r\n\r\n\t\t\t\t\t\t\t\tconst datos = {\r\n\t\t\t\t\t\t\t\t\tuid: user.metadata.createdAt,\r\n\t\t\t\t\t\t\t\t\tmedio: \"\",\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tsetIdUid(user.metadata.createdAt);\r\n\r\n\t\t\t\t\t\t\t\tsetUser(true);\r\n\t\t\t\t\t\t\t\tupdateProfile(auth.currentUser, {\r\n\t\t\t\t\t\t\t\t\tdisplayName: formData.nombre,\r\n\t\t\t\t\t\t\t\t\tphotoURL: \"\",\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\tswal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Actualizar Usuarios\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Nombre Usuario Actualizado de forma correcta!\",\r\n\t\t\t\t\t\t\t\t\t\t\ticon: \"success\",\r\n\t\t\t\t\t\t\t\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tcreateUser(user.metadata.createdAt);\r\n\t\t\t\t\t\t\t\t\t\tsetCreateId(true);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\t\t\tswal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: \"Actualizar Usuarios\",\r\n\t\t\t\t\t\t\t\t\t\t\ttext: \"Error Actualizando nombre de Usuario!\",\r\n\t\t\t\t\t\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\t\t\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetUser(false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconst errorCode = error.code;\r\n\t\t\t\t\t\tconst errorMessage = error.message;\r\n\t\t\t\t\t\tswal({\r\n\t\t\t\t\t\t\ttitle: \"Registro Usuarios\",\r\n\t\t\t\t\t\t\ttext: \"Error al crear la cuenta!\",\r\n\t\t\t\t\t\t\ticon: \"error\",\r\n\t\t\t\t\t\t\tbutton: \"Aceptar\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tgrabaUsuario();\r\n\t\t}\r\n\t\treturn;\r\n\t};\r\n\r\n\tconst createUser = async (iDUser) => {\r\n\t\tconsole.log(\"Procedimiento para crear usuario en BD\")\r\n\t}\r\n\r\n\tconst routeChange = () => {\r\n\r\n\t\t//history.push(`${process.env.PUBLIC_URL}/dashboard`);\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Tabs>\r\n\r\n\t\t\t\t\t<TabPanel>\r\n\t\t\t\t\t\t<form onChange={onChange}>\r\n\t\t\t\t\t\t\t<div className=\"form-horizontal auth-form\">\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Ingrese usuario\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"exampleInputEmail12\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tname=\"contraseña\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Contraseña\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tname=\"confirmarcontraseña\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Confirmar Contraseña\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-terms\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"custom-control custom-checkbox mr-sm-2\">\r\n\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"custom-control-input\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"customControlAutosizing\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Label className=\"d-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"checkbox_animated\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"chk-ani2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\tAcepto términos y condiciones{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/#\">Terms &amp; Condiciones</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-button\">\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => prueba()}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tRegistrarse\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</TabPanel>\r\n\t\t\t\t</Tabs>\r\n\t\t\t</Fragment>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nfunction defaultValueForm() {\r\n\treturn {\r\n\t\tusuario: \"\",\r\n\t\tcontraseña: \"\",\r\n\t\tconfirmarcontraseña: \"\"\r\n\t};\r\n}\r\n\r\nexport default withRouter(LoginTabset);\r\n"]},"metadata":{},"sourceType":"module"}