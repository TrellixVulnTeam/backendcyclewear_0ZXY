{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProyectosProductivos\\\\backendcyclewear\\\\backend\\\\src\\\\components\\\\sales\\\\CreateInvoice.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\nimport Breadcrumb from \"../common/breadcrumb\";\nimport MaterialTable from \"material-table\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport EditAttributesIcon from '@material-ui/icons/EditAttributes';\nimport Moment from \"moment\";\nimport swal from \"sweetalert\";\nimport { Card, CardBody, CardHeader, Col, Container, Form, FormGroup, Input, Label, Row, Button, Modal, ModalFooter, ModalHeader, ModalBody } from \"reactstrap\"; //import Loading from \"../../../components/elements/Loading\";\n\nimport EditIcon from '@material-ui/icons/Edit';\nimport imagen1 from \"../../assets/images/imagenes/bicicleta.jpg\";\nimport Loading from '../elements/Loading/Loading';\nimport ListarProductos from '../products/physical/ListarProductos';\n/*import imagen2 from \"../../../assets/images/imagenes/bolsa.jpg\";\r\nimport imagen3 from \"../../../assets/images/imagenes/camisetas.jpg\";\r\nimport imagen4 from \"../../../assets/images/imagenes/camisetas1.jpg\";\r\nimport imagen5 from \"../../../assets/images/imagenes/caramañola.jpg\";\r\nimport imagen6 from \"../../../assets/images/imagenes/caramañola1.jpg\";\r\nimport imagen7 from \"../../../assets/images/imagenes/caramañola2.jpg\";\r\nimport imagen8 from \"../../../assets/images/imagenes/casco1.jpg\";\r\nimport imagen9 from \"../../../assets/images/imagenes/sillin.jpg\";\r\nimport imagen10 from \"../../../assets/images/imagenes/sillin1.jpg\";\r\nimport imagen11 from \"../../../assets/images/imagenes/sillin3.jpg\";\r\nimport imagen12 from \"../../../assets/images/imagenes/zapatillas.jpg\";\r\nimport imagen13 from \"../../../assets/images/imagenes/zapatillas1.jpg\";\r\nimport imagen14 from \"../../../assets/images/imagenes/zapatillas2.jpg\";\r\nimport imagen15 from \"../../../assets/images/imagenes/zapatillas3.jpg\";\r\nimport imagen16 from \"../../../assets/images/imagenes/casco.jpg\";\r\nimport { CommentSharp } from '@material-ui/icons';*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreateInvoice(props) {\n  _s();\n\n  const [lisPedidos, setListPedidos] = useState([]);\n  const [lisProductosSiigo, setListProductosSiigo] = useState([]);\n  const [listIdentificacion, setListIdentificacion] = useState([]);\n  const [listDetalleFacturas, setListDetalleFacturas] = useState([]);\n  const [fechaFacturas, setFechaFacturas] = useState(false);\n  const [tipoTercero, setTipoTercero] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const fechaactual = Moment(new Date()).format(\"YYYY-MM-DD\"); //const fechaactual = Moment(new Date()).format(\"YYYY-MM-DD HH:mm:ss\");\n\n  const [datosClientesFacturas, setDatosClientesFacturas] = useState([]);\n  const [datos, setDatos] = useState([]);\n  const dispatch = useDispatch();\n  const [leeFacturas, setLeeFacturas] = useState(false); //console.log(\"IMAGEN : \", imagen1)\n\n  useEffect(() => {\n    if (fechaFacturas) {\n      const newDet = [];\n\n      const leeFacturas = async () => {\n        setLoading(true);\n        const params = {\n          fecha: fechaFacturas\n        }; //console.log(\"FECHA \", params);\n\n        await axios({\n          method: 'post',\n          url: 'https://sitbusiness.co/cyclewear/api/205',\n          params\n        }).then(res => {\n          //console.log(\"LONGITUD FACTURAS : \", newDet[0].data.length)\n          res.data.data && res.data.data.map((row, index) => {\n            //console.log(\"ID FACTURAS LEIDAS : \", row);\n            let item = {\n              id_fact: row.id,\n              id_siigo: 0,\n              comprobante: 0,\n              prefijo: 0,\n              facturasiigo: 0,\n              fechafactura: row.attributes.created_at,\n              idcliente: 0,\n              valorfactura: row.attributes.subtotal,\n              descuento: row.attributes.discount,\n              cost_center: 235,\n              seller: row.attributes.seller_id,\n              valorimpuesto: row.attributes.tax_total,\n              porcentajeimpto: 0,\n              Observaciones: \"\"\n            }; //console.log(\"ID FACTURAS LEIDAS : \", item);\n\n            newDet.push(item);\n          });\n          setListPedidos(newDet);\n          /*\r\n              await axios({\r\n                  method: 'post',\r\n                  url: 'https://sitbusiness.co/cyclewear/api/709', params\r\n              }).then(res => {\r\n                  newDetId(res.data);\r\n                  if (contadordos ===  contador) {\r\n                      console.log(\"NUEVO ARREGLO  : \", newDetId);\r\n                      //setListIdentificacion(newDetId[0]);\r\n                      setLoading(false);\r\n                      //console.log(\"LONGITUD : \", contador, \"CONTADOR : \", contadordos, newDetId)\r\n                  }\r\n              }\r\n              ).catch(function (error) {\r\n                  console.log(\"ERROR LEYENDO FACTURAS\");\r\n              })\r\n                 */\n        }).catch(function (error) {\n          console.log(\"ERROR LEYENDO FACTURAS\");\n        });\n      };\n\n      leeFacturas();\n      setLoading(true);\n\n      const leeProductosSiigo = async () => {\n        await axios({\n          method: 'post',\n          url: 'https://sitbusiness.co/cyclewear/api/27'\n        }).then(res => {\n          setLoading(false);\n          setListProductosSiigo(res.data); //setLeeFacturas(true);\n        }).catch(function (error) {\n          console.log(\"ERROR LEYENDO FACTURAS\");\n        });\n      };\n\n      leeProductosSiigo();\n    }\n  }, [fechaFacturas]);\n  useEffect(() => {\n    if (leeFacturas) {\n      setLoading(true);\n      const newDetPed = [];\n      lisPedidos && lisPedidos.map((facturas, index) => {\n        const leer = async () => {\n          const params = {\n            factura: facturas.id_fact\n          }; //console.log(\"LISTADO PEDIDOS : \", params)\n\n          await axios({\n            method: 'get',\n            url: 'https://sitbusiness.co/cyclewear/api/202',\n            params\n          }).then(res => {\n            //console.log(\"DETALLE PEDIDOD : \", res.data.included);\n            res.data.included && res.data.included.map((itempedido, index) => {\n              console.log(\"ITEM PEDIDOS : \", itempedido);\n              let codigoproducto;\n              lisProductosSiigo && lisProductosSiigo.forEach(producto => {\n                if (itempedido.attributes.variant_sku === producto.sku) {\n                  codigoproducto = producto.codigo;\n                }\n              });\n\n              if (itempedido.type == 'line_items') {\n                let item = {\n                  itempedido: itempedido.id,\n                  pedido: itempedido.attributes.invoice_id,\n                  advert_name: itempedido.attributes.advert_name,\n                  advert_code: itempedido.attributes.advert_code,\n                  brand_name: itempedido.attributes.brand_name,\n                  price: itempedido.attributes.price,\n                  quantity: itempedido.attributes.quantity,\n                  subtotal: itempedido.attributes.subtotal,\n                  tax_total: itempedido.attributes.tax_total,\n                  taxon_name: itempedido.attributes.taxon_name,\n                  total: itempedido.attributes.total,\n                  variant_barcode: itempedido.attributes.variant_barcode,\n                  variant_name: itempedido.attributes.variant_name,\n                  variant_sku: itempedido.attributes.variant_sku,\n                  codigoproductosiigo: codigoproducto,\n                  Observaciones: \"\"\n                }; //console.log(\"ITEM PEDIDO : \", res.data)\n\n                newDetPed.push(item);\n              }\n            });\n          }).catch(function (error) {\n            console.log(\"ERROR LEYENDO FACTURAS\");\n          });\n        };\n\n        leer();\n      });\n      setLoading(false); //setLeeFacturas(false);\n\n      setListDetalleFacturas(newDetPed);\n    }\n  }, [leeFacturas]);\n\n  const validarDatos = () => {\n    //console.log(\"Productos  : \", lisProductosSiigo);\n    setLeeFacturas(true);\n    return;\n    const newDet = [];\n    const newDetCli = [];\n    let numfactura = lisPedidos.length;\n    let contador = 0;\n    let identificacion = 0;\n    lisPedidos && lisPedidos.map((facturas, index) => {\n      contador = contador + 1;\n\n      const leer = async () => {\n        const params = {\n          factura: facturas.id\n        };\n        listIdentificacion && listIdentificacion.map((row, index) => {\n          if (row.invoice === facturas.id) {\n            identificacion = row.identificaction;\n          }\n        });\n        await axios({\n          method: 'get',\n          url: 'https://sitbusiness.co/cyclewear/api/202',\n          params\n        }).then(res => {\n          setLoading(false);\n          setListDetalleFacturas(res.data);\n        }).catch(function (error) {\n          console.log(\"ERROR LEYENDO FACTURAS\");\n        }); //if (res.data.data.id == 105659) {\n        //  console.log(\"RES DATA : \", res.data)\n        //}\n        //res.data.included && res.data.included.map((items, index) => {\n        //    if (items.attributes.invoice_id == 105659)\n        //        console.log(\"ITEMS FACTURAS : \", items)\n\n        lisProductosSiigo && lisProductosSiigo((producto, index) => {\n          console.log(\"\"); //if (items.attributes.variant_sku == producto.sku) {\n          //   console.log(\"CODIGO PRODUCTO : \", producto.sku)\n          //}\n        }); //})\n\n        return; //let longitud = res.data.included.length - 1;\n\n        let fecha = \"+fechaactual+\";\n        let item = {\n          id: 24446,\n          date: fechaactual,\n          identification: 4760027261,\n          cost_center: 235,\n          seller: 629,\n          code: \"100030853\",\n          description: \"Camiseta de algodón\",\n          quantity: 2,\n          discount: 0,\n          price: 1069,\n          value: 2544.22,\n          idpayments: 5636,\n          due_date: \"2022-06-19\",\n          idtaxes: 13156\n        };\n        newDet.push(item);\n\n        if (contador === numfactura) {\n          //alert(\"ENTRE\")\n          //console.log(\"CONTADOR : \", contador, \"NUM FACTURA : \", numfactura)\n          if (newDet.length === numfactura) {\n            const esperacinco = async event => {\n              await sleep(1000); //console.log(\"NEW DET : \", newDet);\n\n              setDatosClientesFacturas(newDet);\n            };\n\n            esperacinco();\n          }\n        }\n      };\n\n      leer();\n    });\n    /*\r\n                const leerClientes = async () => {\r\n                    const params = {\r\n                        tipotercero: tipoTercero\r\n                    }\r\n    \r\n                    await axios({\r\n                        method: 'post',\r\n                        url: 'https://sitbusiness.co/cyclewear/api/114', params\r\n                    }).then(res => {\r\n                        console.log(\"RETORNA : \", res.data);\r\n                        if (res) {\r\n                            setListaTercerosCreados(res.data);\r\n                        }\r\n                        setLoading(false);\r\n                    }\r\n                    ).catch(function (error) {\r\n                        console.log(\"ERROR LEYENDO FACTURAS\");\r\n                    })\r\n                }\r\n                */\n    //setListaTercerosCreados(newDetCli[0]);\n    //console.log(\"NEW DET XXXX : \", newDetCli[0]);\n  };\n\n  const sleep = () => setTimeout(() => {\n    console.log(\"Esperando!\");\n  }, 100); //const leerDatosFacturas = async () => {\n\n\n  const crearFacturas = () => {\n    setLoading(true); //console.log(\"TERCEROS CREADOS : \", listaTercerosCreados);\n    //console.log(\"FACTURAS LEIDAS : \", datosClientesFacturas);\n    //console.log(\"ENCABEZADO PEDIDOS : \", lisPedidos);\n    //console.log(\"DETALLE PEDIDOS : \", listDetalleFacturas);\n\n    let longitud = lisPedidos.length;\n    let contador = 0;\n    lisPedidos && lisPedidos.forEach(row => {\n      const leerPedidos = async () => {\n        contador = contador + 1;\n        let day = Moment(row.fechafactura, 'YYYY/MM/DD');\n        let anno = getFullYear(row.fechafactura);\n        let mes = getMonth(row.fechafactura);\n        let dia = getDate(row.fechafactura);\n        console.log(\"VALOR FECHA : \", day);\n        return;\n        const params = {\n          id_fact: row.id_fact,\n          id_siigo: row.id_siigo,\n          comprobante: row.comprobante,\n          prefijo: row.prefijo,\n          facturasiigo: row.facturasiigo,\n          fechafactura: row.fechafactura,\n          idcliente: row.idcliente,\n          valorfactura: row.valorfactura,\n          descuento: row.descuento,\n          cost_center: row.cost_center,\n          seller: row.seller,\n          valorimpuesto: row.valorimpuesto,\n          porcentajeimpto: row.porcentajeimpto,\n          Observaciones: \"\"\n        };\n        await axios({\n          method: 'post',\n          url: 'https://sitbusiness.co/cyclewear/api/206',\n          params\n        }).then(res => {\n          if (contador === longitud) {\n            console.log(\"VALOR RESPONSE : \", res);\n            setLoading(false);\n          }\n        }).catch(function (error) {\n          console.log(\"ERROR LEYENDO FACTURAS\");\n        });\n      };\n\n      leerPedidos();\n    }); //setCarrocerias(newDet);\n\n    return;\n\n    for (var i = 0; i < 1; i++) {\n      contador = contador + 1;\n      const params = datosClientesFacturas[i];\n      console.log(\"PARAMETROS : \", params);\n      axios({\n        method: 'post',\n        url: 'https://sitbusiness.co/cyclewear/api/729',\n        params\n      }).then(res => {\n        console.log(\"RESPONSE : \", res);\n        if (contador === longitud) setLoading(false);\n      }).catch(function (error) {\n        console.log(\"ERROR LEYENDO FACTURAS\");\n      });\n    } //console.log(\"TOTAL CLIENTES : \", datosClientesFacturas)\n    //console.log(\"CONTADOR : \", contador, \" LONGITUD : \", longitud);\n\n  };\n\n  const handleChangeFecha = async selectedOptions => {\n    const newDet = []; //console.log(\"FECHA : \", selectedOptions)\n\n    setFechaFacturas(selectedOptions);\n    let contador = 0;\n    lisPedidos && lisPedidos.map((facturas, index) => {\n      let item = {\n        id: facturas.id\n      };\n      newDet.push(item);\n    });\n    setDatos(newDet); //console.log(\"PEDIDOS : \", newDet)\n  };\n\n  const handleChangeTipoTercero = async selectedOptions => {\n    setTipoTercero(selectedOptions);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 24\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-30 ml-10\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xl: 2,\n          lg: 2,\n          md: 2,\n          xs: 2,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tama\\xF1ofuentetercero\",\n            children: \"Fecha facturas:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xl: 3,\n          lg: 3,\n          md: 3,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-horizontal auth-form\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"fecha\",\n                type: \"date\",\n                className: \"form-control\",\n                placeholder: \"Ingrese fecha\",\n                id: \"exampleInputEmail12\",\n                onChange: e => handleChangeFecha(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xl: 3,\n        lg: 3,\n        md: 3,\n        xs: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xl: 3,\n        lg: 3,\n        md: 3,\n        xs: 3,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"botoncrearcliente\",\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(ReactHTMLTableToExcel, {\n            table: \"ubicacionesequipos\",\n            filename: \"DatosClientesCWR\",\n            sheet: \"Sheet\",\n            buttonText: \"Exportar a Excel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xl: 3,\n        lg: 3,\n        md: 3,\n        xs: 3,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"botoncrearcliente\",\n          color: \"primary\",\n          onClick: crearFacturas,\n          children: \"Crear Facturas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xl: 3,\n        lg: 3,\n        md: 3,\n        xs: 3,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"botoncrearcliente\",\n          color: \"primary\",\n          onClick: validarDatos,\n          children: \"Validar Datos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      id: \"ubicacionesequipos\",\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"IDENTIFICACION\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"PEDIDO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"FECHA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"NOMBRE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"APELLIDO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"EMAIL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"CIUDAD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"TELEFONO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"DIRECCION\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ESTADO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"TOTAL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: datosClientesFacturas && datosClientesFacturas.map((facturas, index) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.identification\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.pedido\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.fecha\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.apellido\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.ciudad\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.telefono\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.direccion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.estado\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: facturas.valor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 37\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 417,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CreateInvoice, \"Al4DyAaO7oAdXmux2V8Ag6cJ2HU=\", false, function () {\n  return [useDispatch];\n});\n\n_c = CreateInvoice;\nexport default CreateInvoice;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateInvoice\");","map":{"version":3,"sources":["C:/ProyectosProductivos/backendcyclewear/backend/src/components/sales/CreateInvoice.js"],"names":["React","Fragment","useEffect","useState","ReactHTMLTableToExcel","Breadcrumb","MaterialTable","useDispatch","useSelector","axios","CancelIcon","EditAttributesIcon","Moment","swal","Card","CardBody","CardHeader","Col","Container","Form","FormGroup","Input","Label","Row","Button","Modal","ModalFooter","ModalHeader","ModalBody","EditIcon","imagen1","Loading","ListarProductos","CreateInvoice","props","lisPedidos","setListPedidos","lisProductosSiigo","setListProductosSiigo","listIdentificacion","setListIdentificacion","listDetalleFacturas","setListDetalleFacturas","fechaFacturas","setFechaFacturas","tipoTercero","setTipoTercero","loading","setLoading","fechaactual","Date","format","datosClientesFacturas","setDatosClientesFacturas","datos","setDatos","dispatch","leeFacturas","setLeeFacturas","newDet","params","fecha","method","url","then","res","data","map","row","index","item","id_fact","id","id_siigo","comprobante","prefijo","facturasiigo","fechafactura","attributes","created_at","idcliente","valorfactura","subtotal","descuento","discount","cost_center","seller","seller_id","valorimpuesto","tax_total","porcentajeimpto","Observaciones","push","catch","error","console","log","leeProductosSiigo","newDetPed","facturas","leer","factura","included","itempedido","codigoproducto","forEach","producto","variant_sku","sku","codigo","type","pedido","invoice_id","advert_name","advert_code","brand_name","price","quantity","taxon_name","total","variant_barcode","variant_name","codigoproductosiigo","validarDatos","newDetCli","numfactura","length","contador","identificacion","invoice","identificaction","date","identification","code","description","value","idpayments","due_date","idtaxes","esperacinco","event","sleep","setTimeout","crearFacturas","longitud","leerPedidos","day","anno","getFullYear","mes","getMonth","dia","getDate","i","handleChangeFecha","selectedOptions","handleChangeTipoTercero","e","target","apellido","email","ciudad","telefono","direccion","estado","valor"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\nimport Breadcrumb from \"../common/breadcrumb\";\r\nimport MaterialTable from \"material-table\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport EditAttributesIcon from '@material-ui/icons/EditAttributes';\r\nimport Moment from \"moment\";\r\nimport swal from \"sweetalert\";\r\nimport {\r\n    Card, CardBody, CardHeader, Col, Container, Form, FormGroup, Input, Label, Row, Button, Modal, ModalFooter,\r\n    ModalHeader, ModalBody\r\n} from \"reactstrap\";\r\n//import Loading from \"../../../components/elements/Loading\";\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport imagen1 from \"../../assets/images/imagenes/bicicleta.jpg\";\r\nimport Loading from '../elements/Loading/Loading';\r\nimport ListarProductos from '../products/physical/ListarProductos';\r\n\r\n/*import imagen2 from \"../../../assets/images/imagenes/bolsa.jpg\";\r\nimport imagen3 from \"../../../assets/images/imagenes/camisetas.jpg\";\r\nimport imagen4 from \"../../../assets/images/imagenes/camisetas1.jpg\";\r\nimport imagen5 from \"../../../assets/images/imagenes/caramañola.jpg\";\r\nimport imagen6 from \"../../../assets/images/imagenes/caramañola1.jpg\";\r\nimport imagen7 from \"../../../assets/images/imagenes/caramañola2.jpg\";\r\nimport imagen8 from \"../../../assets/images/imagenes/casco1.jpg\";\r\nimport imagen9 from \"../../../assets/images/imagenes/sillin.jpg\";\r\nimport imagen10 from \"../../../assets/images/imagenes/sillin1.jpg\";\r\nimport imagen11 from \"../../../assets/images/imagenes/sillin3.jpg\";\r\nimport imagen12 from \"../../../assets/images/imagenes/zapatillas.jpg\";\r\nimport imagen13 from \"../../../assets/images/imagenes/zapatillas1.jpg\";\r\nimport imagen14 from \"../../../assets/images/imagenes/zapatillas2.jpg\";\r\nimport imagen15 from \"../../../assets/images/imagenes/zapatillas3.jpg\";\r\nimport imagen16 from \"../../../assets/images/imagenes/casco.jpg\";\r\nimport { CommentSharp } from '@material-ui/icons';*/\r\n\r\nfunction CreateInvoice(props) {\r\n    const [lisPedidos, setListPedidos] = useState([]);\r\n    const [lisProductosSiigo, setListProductosSiigo] = useState([]);\r\n    const [listIdentificacion, setListIdentificacion] = useState([]);\r\n    const [listDetalleFacturas, setListDetalleFacturas] = useState([]);\r\n    const [fechaFacturas, setFechaFacturas] = useState(false);\r\n    const [tipoTercero, setTipoTercero] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const fechaactual = Moment(new Date()).format(\"YYYY-MM-DD\");\r\n    //const fechaactual = Moment(new Date()).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    const [datosClientesFacturas, setDatosClientesFacturas] = useState([]);\r\n    const [datos, setDatos] = useState([]);\r\n    const dispatch = useDispatch();\r\n    const [leeFacturas, setLeeFacturas] = useState(false);\r\n\r\n    //console.log(\"IMAGEN : \", imagen1)\r\n\r\n    useEffect(() => {\r\n        if (fechaFacturas) {\r\n            const newDet = [];\r\n            const leeFacturas = async () => {\r\n                setLoading(true);\r\n                const params = {\r\n                    fecha: fechaFacturas\r\n                }\r\n                //console.log(\"FECHA \", params);\r\n                await axios({\r\n                    method: 'post',\r\n                    url: 'https://sitbusiness.co/cyclewear/api/205', params\r\n                }).then(res => {\r\n\r\n                    //console.log(\"LONGITUD FACTURAS : \", newDet[0].data.length)\r\n                    res.data.data && res.data.data.map((row, index) => {\r\n                        //console.log(\"ID FACTURAS LEIDAS : \", row);\r\n                        let item = {\r\n                            id_fact: row.id,\r\n                            id_siigo: 0,\r\n                            comprobante: 0,\r\n                            prefijo: 0,\r\n                            facturasiigo: 0,\r\n                            fechafactura: row.attributes.created_at,\r\n                            idcliente: 0,\r\n                            valorfactura: row.attributes.subtotal,\r\n                            descuento: row.attributes.discount,\r\n                            cost_center: 235,\r\n                            seller: row.attributes.seller_id,\r\n                            valorimpuesto: row.attributes.tax_total,\r\n                            porcentajeimpto: 0,\r\n                            Observaciones: \"\"\r\n                        };\r\n                        //console.log(\"ID FACTURAS LEIDAS : \", item);\r\n                        newDet.push(item);\r\n                    })\r\n                    setListPedidos(newDet);\r\n                    /*\r\n                        await axios({\r\n                            method: 'post',\r\n                            url: 'https://sitbusiness.co/cyclewear/api/709', params\r\n                        }).then(res => {\r\n                            newDetId(res.data);\r\n                            if (contadordos ===  contador) {\r\n                                console.log(\"NUEVO ARREGLO  : \", newDetId);\r\n                                //setListIdentificacion(newDetId[0]);\r\n                                setLoading(false);\r\n                                //console.log(\"LONGITUD : \", contador, \"CONTADOR : \", contadordos, newDetId)\r\n                            }\r\n                        }\r\n                        ).catch(function (error) {\r\n                            console.log(\"ERROR LEYENDO FACTURAS\");\r\n                        })\r\n               \r\n          */\r\n                }\r\n                ).catch(function (error) {\r\n                    console.log(\"ERROR LEYENDO FACTURAS\");\r\n                })\r\n            }\r\n            leeFacturas();\r\n\r\n            setLoading(true);\r\n            const leeProductosSiigo = async () => {\r\n                await axios({\r\n                    method: 'post',\r\n                    url: 'https://sitbusiness.co/cyclewear/api/27'\r\n                }).then(res => {\r\n                    setLoading(false);\r\n                    setListProductosSiigo(res.data);\r\n                    //setLeeFacturas(true);\r\n                }\r\n                ).catch(function (error) {\r\n                    console.log(\"ERROR LEYENDO FACTURAS\");\r\n                })\r\n            }\r\n            leeProductosSiigo();\r\n        }\r\n    }, [fechaFacturas])\r\n\r\n    useEffect(() => {\r\n        if (leeFacturas) {\r\n\r\n            setLoading(true);\r\n            const newDetPed = [];\r\n            lisPedidos && lisPedidos.map((facturas, index) => {\r\n                const leer = async () => {\r\n                    const params = {\r\n                        factura: facturas.id_fact\r\n                    }\r\n                    //console.log(\"LISTADO PEDIDOS : \", params)\r\n\r\n                    await axios({\r\n                        method: 'get',\r\n                        url: 'https://sitbusiness.co/cyclewear/api/202', params\r\n                    }).then(res => {\r\n                        //console.log(\"DETALLE PEDIDOD : \", res.data.included);\r\n\r\n                        res.data.included && res.data.included.map((itempedido, index) => {\r\n                            console.log(\"ITEM PEDIDOS : \", itempedido);\r\n                            let codigoproducto;\r\n                            lisProductosSiigo && lisProductosSiigo.forEach((producto) => {\r\n                                if (itempedido.attributes.variant_sku === producto.sku) {\r\n                                    codigoproducto = producto.codigo;\r\n                                }\r\n                            })\r\n                            if (itempedido.type == 'line_items') {\r\n                                let item = {\r\n                                    itempedido: itempedido.id,\r\n                                    pedido: itempedido.attributes.invoice_id,\r\n                                    advert_name: itempedido.attributes.advert_name,\r\n                                    advert_code: itempedido.attributes.advert_code,\r\n                                    brand_name: itempedido.attributes.brand_name,\r\n                                    price: itempedido.attributes.price,\r\n                                    quantity: itempedido.attributes.quantity,\r\n                                    subtotal: itempedido.attributes.subtotal,\r\n                                    tax_total: itempedido.attributes.tax_total,\r\n                                    taxon_name: itempedido.attributes.taxon_name,\r\n                                    total: itempedido.attributes.total,\r\n                                    variant_barcode: itempedido.attributes.variant_barcode,\r\n                                    variant_name: itempedido.attributes.variant_name,\r\n                                    variant_sku: itempedido.attributes.variant_sku,\r\n                                    codigoproductosiigo: codigoproducto,\r\n                                    Observaciones: \"\"\r\n                                };\r\n                                //console.log(\"ITEM PEDIDO : \", res.data)\r\n                                newDetPed.push(item);\r\n                            }\r\n                        })\r\n                    }\r\n                    ).catch(function (error) {\r\n                        console.log(\"ERROR LEYENDO FACTURAS\");\r\n                    })\r\n                }\r\n                leer();\r\n            })\r\n            setLoading(false);\r\n            //setLeeFacturas(false);\r\n            setListDetalleFacturas(newDetPed);\r\n        }\r\n    }, [leeFacturas])\r\n\r\n    const validarDatos = () => {\r\n        //console.log(\"Productos  : \", lisProductosSiigo);\r\n        setLeeFacturas(true);\r\n        return\r\n        const newDet = [];\r\n        const newDetCli = [];\r\n        let numfactura = lisPedidos.length;\r\n        let contador = 0;\r\n        let identificacion = 0;\r\n        lisPedidos && lisPedidos.map((facturas, index) => {\r\n            contador = contador + 1;\r\n            const leer = async () => {\r\n                const params = {\r\n                    factura: facturas.id\r\n                }\r\n\r\n                listIdentificacion && listIdentificacion.map((row, index) => {\r\n                    if (row.invoice === facturas.id) {\r\n                        identificacion = row.identificaction;\r\n                    }\r\n                })\r\n\r\n                await axios({\r\n                    method: 'get',\r\n                    url: 'https://sitbusiness.co/cyclewear/api/202', params\r\n                }).then(res => {\r\n                    setLoading(false);\r\n                    setListDetalleFacturas(res.data);\r\n                }\r\n                ).catch(function (error) {\r\n                    console.log(\"ERROR LEYENDO FACTURAS\");\r\n                })\r\n\r\n                //if (res.data.data.id == 105659) {\r\n                //  console.log(\"RES DATA : \", res.data)\r\n                //}\r\n\r\n                //res.data.included && res.data.included.map((items, index) => {\r\n                //    if (items.attributes.invoice_id == 105659)\r\n                //        console.log(\"ITEMS FACTURAS : \", items)\r\n\r\n                lisProductosSiigo && lisProductosSiigo((producto, index) => {\r\n                    console.log(\"\")\r\n                    //if (items.attributes.variant_sku == producto.sku) {\r\n                    //   console.log(\"CODIGO PRODUCTO : \", producto.sku)\r\n                    //}\r\n                })\r\n\r\n                //})\r\n\r\n                return\r\n                //let longitud = res.data.included.length - 1;\r\n                let fecha = \"+fechaactual+\"\r\n\r\n                let item = {\r\n                    id: 24446,\r\n                    date: fechaactual,\r\n                    identification: 4760027261,\r\n                    cost_center: 235,\r\n                    seller: 629,\r\n                    code: \"100030853\",\r\n                    description: \"Camiseta de algodón\",\r\n                    quantity: 2,\r\n                    discount: 0,\r\n                    price: 1069,\r\n                    value: 2544.22,\r\n                    idpayments: 5636,\r\n                    due_date: \"2022-06-19\",\r\n                    idtaxes: 13156,\r\n                };\r\n\r\n                newDet.push(item);\r\n\r\n                if (contador === numfactura) {\r\n                    //alert(\"ENTRE\")\r\n                    //console.log(\"CONTADOR : \", contador, \"NUM FACTURA : \", numfactura)\r\n                    if (newDet.length === numfactura) {\r\n                        const esperacinco = async event => {\r\n                            await sleep(1000);\r\n                            //console.log(\"NEW DET : \", newDet);\r\n                            setDatosClientesFacturas(newDet);\r\n                        }\r\n                        esperacinco();\r\n                    }\r\n                }\r\n\r\n            }\r\n            leer();\r\n        })\r\n\r\n        /*\r\n                    const leerClientes = async () => {\r\n                        const params = {\r\n                            tipotercero: tipoTercero\r\n                        }\r\n        \r\n                        await axios({\r\n                            method: 'post',\r\n                            url: 'https://sitbusiness.co/cyclewear/api/114', params\r\n                        }).then(res => {\r\n                            console.log(\"RETORNA : \", res.data);\r\n                            if (res) {\r\n                                setListaTercerosCreados(res.data);\r\n                            }\r\n                            setLoading(false);\r\n                        }\r\n                        ).catch(function (error) {\r\n                            console.log(\"ERROR LEYENDO FACTURAS\");\r\n                        })\r\n                    }\r\n                    */\r\n        //setListaTercerosCreados(newDetCli[0]);\r\n        //console.log(\"NEW DET XXXX : \", newDetCli[0]);\r\n\r\n    }\r\n\r\n    const sleep = () => (\r\n        setTimeout(() => { console.log(\"Esperando!\") }, 100)\r\n    );\r\n\r\n    //const leerDatosFacturas = async () => {\r\n    const crearFacturas = () => {\r\n        setLoading(true);\r\n        //console.log(\"TERCEROS CREADOS : \", listaTercerosCreados);\r\n        //console.log(\"FACTURAS LEIDAS : \", datosClientesFacturas);\r\n\r\n        //console.log(\"ENCABEZADO PEDIDOS : \", lisPedidos);\r\n        //console.log(\"DETALLE PEDIDOS : \", listDetalleFacturas);\r\n\r\n        let longitud = lisPedidos.length;\r\n        let contador = 0;\r\n\r\n        lisPedidos && lisPedidos.forEach((row) => {\r\n            const leerPedidos = async () => {\r\n                contador = contador + 1;\r\n                let day = Moment(row.fechafactura, 'YYYY/MM/DD');\r\n                let anno = getFullYear(row.fechafactura,)\r\n                let mes = getMonth(row.fechafactura,)\r\n                let dia = getDate(row.fechafactura,)\r\n                console.log(\"VALOR FECHA : \", day);\r\n                return\r\n                const params = {\r\n                    id_fact: row.id_fact,\r\n                    id_siigo: row.id_siigo,\r\n                    comprobante: row.comprobante,\r\n                    prefijo: row.prefijo,\r\n                    facturasiigo: row.facturasiigo,\r\n                    fechafactura: row.fechafactura,\r\n                    idcliente: row.idcliente,\r\n                    valorfactura: row.valorfactura,\r\n                    descuento: row.descuento,\r\n                    cost_center: row.cost_center,\r\n                    seller: row.seller,\r\n                    valorimpuesto: row.valorimpuesto,\r\n                    porcentajeimpto: row.porcentajeimpto,\r\n                    Observaciones: \"\"\r\n                }\r\n                await axios({\r\n                    method: 'post',\r\n                    url: 'https://sitbusiness.co/cyclewear/api/206', params\r\n                }).then(res => {\r\n                    if (contador === longitud) {\r\n                        console.log(\"VALOR RESPONSE : \", res)\r\n                        setLoading(false);\r\n                    }\r\n                }\r\n                ).catch(function (error) {\r\n                    console.log(\"ERROR LEYENDO FACTURAS\");\r\n                })\r\n            }\r\n            leerPedidos()\r\n        });\r\n        //setCarrocerias(newDet);\r\n        return\r\n        for (var i = 0; i < 1; i++) {\r\n            contador = contador + 1;\r\n\r\n            const params = datosClientesFacturas[i];\r\n            console.log(\"PARAMETROS : \", params);\r\n\r\n            axios({\r\n                method: 'post',\r\n                url: 'https://sitbusiness.co/cyclewear/api/729', params\r\n            }).then(res => {\r\n\r\n                console.log(\"RESPONSE : \", res)\r\n\r\n                if (contador === longitud)\r\n                    setLoading(false);\r\n            }\r\n            ).catch(function (error) {\r\n                console.log(\"ERROR LEYENDO FACTURAS\");\r\n            })\r\n\r\n        }\r\n        //console.log(\"TOTAL CLIENTES : \", datosClientesFacturas)\r\n        //console.log(\"CONTADOR : \", contador, \" LONGITUD : \", longitud);\r\n    }\r\n\r\n    const handleChangeFecha = async (selectedOptions) => {\r\n        const newDet = [];\r\n        //console.log(\"FECHA : \", selectedOptions)\r\n        setFechaFacturas(selectedOptions)\r\n\r\n        let contador = 0;\r\n        lisPedidos && lisPedidos.map((facturas, index) => {\r\n            let item = {\r\n                id: facturas.id\r\n            };\r\n            newDet.push(item);\r\n        })\r\n        setDatos(newDet)\r\n        //console.log(\"PEDIDOS : \", newDet)\r\n    }\r\n\r\n    const handleChangeTipoTercero = async (selectedOptions) => {\r\n        setTipoTercero(selectedOptions)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {loading ? <Loading /> : null}\r\n            <br />\r\n            <div className='mb-30 ml-10'>\r\n                <Row>\r\n                    <Col xl={2} lg={2} md={2} xs={2}>\r\n                        <div className='tamañofuentetercero'>\r\n                            Fecha facturas:\r\n                        </div>\r\n                    </Col>\r\n                    <Col xl={3} lg={3} md={3} xs={3}>\r\n                        <div className=\"form-horizontal auth-form\">\r\n                            <div>\r\n                                <input\r\n                                    name=\"fecha\"\r\n                                    type=\"date\"\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Ingrese fecha\"\r\n                                    id=\"exampleInputEmail12\"\r\n                                    onChange={(e) =>\r\n                                        handleChangeFecha(\r\n                                            e.target\r\n                                                .value\r\n                                        )}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n\r\n            <hr />\r\n            <Row>\r\n                <Col xl={3} lg={3} md={3} xs={3}>\r\n\r\n                </Col>\r\n                <Col xl={3} lg={3} md={3} xs={3}>\r\n                    <button className='botoncrearcliente' color=\"primary\" >\r\n                        <ReactHTMLTableToExcel\r\n                            table=\"ubicacionesequipos\"\r\n                            filename=\"DatosClientesCWR\"\r\n                            sheet=\"Sheet\"\r\n                            buttonText=\"Exportar a Excel\"\r\n                        />\r\n                    </button>\r\n                </Col>\r\n\r\n                <Col xl={3} lg={3} md={3} xs={3}>\r\n                    <button className='botoncrearcliente' color=\"primary\" onClick={crearFacturas}>\r\n                        Crear Facturas\r\n                    </button>\r\n                </Col>\r\n                <Col xl={3} lg={3} md={3} xs={3}>\r\n                    <button className='botoncrearcliente' color=\"primary\" onClick={validarDatos}>\r\n                        Validar Datos\r\n                    </button>\r\n                </Col>\r\n            </Row>\r\n            <hr />\r\n            {\r\n\r\n                <table id=\"ubicacionesequipos\" className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>IDENTIFICACION</th>\r\n                            <th>PEDIDO</th>\r\n                            <th>FECHA</th>\r\n                            <th>NOMBRE</th>\r\n                            <th>APELLIDO</th>\r\n                            <th>EMAIL</th>\r\n                            <th>CIUDAD</th>\r\n                            <th>TELEFONO</th>\r\n                            <th>DIRECCION</th>\r\n                            <th>ESTADO</th>\r\n                            <th>TOTAL</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            datosClientesFacturas && datosClientesFacturas.map((facturas, index) => {\r\n                                return (\r\n                                    <tr>\r\n                                        <td>{facturas.identification}</td>\r\n                                        <td>{facturas.pedido}</td>\r\n                                        <td>{facturas.fecha}</td>\r\n                                        <td>{facturas.apellido}</td>\r\n                                        <td>{facturas.email}</td>\r\n                                        <td>{facturas.ciudad}</td>\r\n                                        <td>{facturas.telefono}</td>\r\n                                        <td>{facturas.direccion}</td>\r\n                                        <td>{facturas.estado}</td>\r\n                                        <td>{facturas.valor}</td>\r\n                                    </tr>\r\n                                )\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateInvoice;"]},"metadata":{},"sourceType":"module"}