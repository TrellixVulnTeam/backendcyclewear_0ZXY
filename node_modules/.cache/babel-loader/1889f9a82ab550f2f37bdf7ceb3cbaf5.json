{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProyectosProductivos\\\\backendcyclewear\\\\backend\\\\src\\\\components\\\\sales\\\\orders.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\nimport MaterialTable from \"material-table\";\nimport axios from \"axios\";\nimport Breadcrumb from \"../common/breadcrumb\";\nimport data from \"../../assets/data/orders\";\nimport Datatable from \"../common/datatable\";\nimport { Card, CardBody, CardHeader, Col, Container, Form, FormGroup, Input, Label, Row, Button, Modal, ModalFooter, ModalHeader, ModalBody } from \"reactstrap\";\nimport swal from \"sweetalert\";\nimport Loading from '../elements/Loading/Loading';\nimport EditIcon from '@material-ui/icons/Edit';\nimport EditAttributesIcon from '@material-ui/icons/EditAttributes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Orders = () => {\n  _s();\n\n  const [lisPedidos, setListPedidos] = useState([]);\n  const [pedidoSeleccionado, setPedidoSeleccionado] = useState([]);\n  const [lisItemsPedidos, setLisItemsPedidos] = useState([]);\n  const [listItemsPedidoSeleccionado, setListItemsPedidoSeleccionado] = useState([]);\n  const [modalVariantes, setModalVariantes] = useState(false);\n  useEffect(() => {\n    const newDet = [];\n    let contador = 0;\n    let contadordos = 0;\n\n    const leePedidos = async () => {\n      //setLoading(true);\n      const params = {\n        pedido: 0\n      }; //console.log(\"FECHA \", params);\n\n      await axios({\n        method: 'get',\n        url: 'https://sitbusiness.co/cyclewear/api/210',\n        params\n      }).then(res => {\n        //console.log(\"PEDIDOS : \", res.data)\n        setListPedidos(res.data);\n      }).catch(function (error) {\n        console.log(\"ERROR LEYENDO PEDIDOS\");\n      });\n    };\n\n    leePedidos();\n  }, []);\n  useEffect(() => {\n    const newDet = [];\n    let contador = 0;\n    let contadordos = 0;\n\n    const leeItemsPedidos = async () => {\n      //setLoading(true);\n      const params = {\n        pedido: 0\n      }; //console.log(\"FECHA \", params);\n\n      await axios({\n        method: 'get',\n        url: 'https://sitbusiness.co/cyclewear/api/211',\n        params\n      }).then(res => {\n        //console.log(\"PEDIDOS : \", res.data)\n        setLisItemsPedidos(res.data);\n      }).catch(function (error) {\n        console.log(\"ERROR LEYENDO ITEMS PEDIDOS\");\n      });\n    };\n\n    leeItemsPedidos();\n  }, []);\n\n  const seleccionarPedido = (pedido, caso) => {\n    console.log(\"PEDIDO : \", pedido);\n    setPedidoSeleccionado(pedido);\n    console.log(\"ITEMS PEDIDOS : \", lisItemsPedidos);\n    const newDet = [];\n    {\n      lisItemsPedidos && lisItemsPedidos.map((row, index) => {\n        {\n          //console.log(\"INTERNO VARIANTE : \", variante.idinterno)\n          if (pedido.id_fact == row.pedido) {\n            let item = {\n              advert_code: row.advert_code,\n              advert_name: row.advert_name,\n              brand_name: row.brand_name,\n              codigoproductosiigo: row.codigoproductosiigo,\n              direccion: row.direccion,\n              itempedido: row.itempedido,\n              observaciones: row.observaciones,\n              pedido: row.pedido,\n              price: row.price,\n              quantity: row.quantity,\n              subtotal: row.subtotal,\n              tax_total: row.tax_total,\n              taxon_name: row.taxon_name,\n              total: row.total,\n              variant_barcode: row.variant_barcode,\n              variant_name: row.variant_name,\n              variant_sku: row.variant_sku\n            };\n            newDet.push(item);\n          }\n        }\n      });\n    }\n    console.log(\"NUEVO ARREGLO VARIANTE : \", newDet);\n    setList(newDet);\n    caso === \"Pedido\" ? abrirCerrarModalVariantes() : abrirCerrarModalVariantes();\n  };\n\n  const abrirCerrarModalVariantes = () => {\n    setModalVariantes(!modalVariantes);\n  };\n\n  const grabarVariantes = () => {\n    console.log(\"DATOS VARIANTEs : \", listItemsPedidoSeleccionado);\n  };\n\n  const columnas = [{\n    title: 'Id Pedido',\n    field: 'id_fact'\n  }, {\n    title: 'Id Siigo',\n    field: 'id_siigo'\n  }, {\n    title: 'Factura Siigo',\n    field: 'facturasiigo'\n  }, {\n    title: 'Fecha Pedido',\n    field: 'fechafactura'\n  }, {\n    title: 'Id Cliente',\n    field: 'idcliente'\n  }, {\n    title: 'Valor Factura',\n    field: 'valorfactura'\n  }, {\n    title: 'Descuento',\n    field: 'descuento'\n  }, {\n    title: 'Observacion',\n    field: 'observaciones'\n  }];\n  const itemspedidos = [{\n    title: 'Item Pedido',\n    field: 'itempedido'\n  }, {\n    title: 'AdvertName',\n    field: 'advert_code'\n  }, {\n    title: 'AdvertCode',\n    field: 'advert_code'\n  }, {\n    title: 'Marca',\n    field: 'brand_name'\n  }, {\n    title: 'Valor',\n    field: 'price'\n  }, {\n    title: 'Cantidad',\n    field: 'quantity'\n  }, {\n    title: 'Nombre Variante',\n    field: 'variant_name'\n  }, {\n    title: 'Codio de Barra',\n    field: 'variant_barcode'\n  }, {\n    title: 'SKU',\n    field: 'variant_sku'\n  }, {\n    title: 'CodigoSiigo',\n    field: 'codigoproductosiigo'\n  }, {\n    title: 'Direccion',\n    field: 'direccion'\n  }];\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n      title: \"Pedidos Bike Exchange\",\n      parent: \"Sales\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      children: [/*#__PURE__*/_jsxDEV(MaterialTable, {\n        title: \"Pedidos Cycle Wear\",\n        columns: columnas,\n        data: lisPedidos,\n        actions: [{\n          icon: EditIcon,\n          tooltip: 'Editar Producto',\n          onClick: (event, rowData) => seleccionarPedido(rowData, \"Pedido\")\n        }, {\n          icon: EditAttributesIcon,\n          tooltip: 'Variante Producto',\n          onClick: (event, rowData) => seleccionarPedido(rowData, \"Variante\")\n        }],\n        options: {\n          actionsColumnIndex: 11,\n          headerStyle: {\n            backgroundColor: '#015CAB',\n            fontSize: 16,\n            color: 'white'\n          },\n          rowStyle: {\n            fontSize: 14\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        className: \"custom-modal-style\",\n        isOpen: modalVariantes,\n        toggle: abrirCerrarModalVariantes,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          toggle: abrirCerrarModalVariantes,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"centrartextomodalvariantes\",\n            children: \"CONSULTAR VARIANTES PRODUCTOS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(MaterialTable, {\n            title: \"Productos Cycle Wear\",\n            columns: itemspedidos,\n            data: listItemsPedidoSeleccionado,\n            editable: {\n              onRowUpdate: (newData, oldData) => new Promise((resolve, reject) => {\n                setTimeout(() => {\n                  const dataUpdate = [...listItemsPedidoSeleccionado];\n                  const index = oldData.tableData.id;\n                  dataUpdate[index] = newData;\n                  setListItemsPedidoSeleccionado([...dataUpdate]);\n                  resolve();\n                }, 1000);\n              })\n            },\n            options: {\n              actionsColumnIndex: 11,\n              headerStyle: {\n                backgroundColor: '#015CAB',\n                fontSize: 16,\n                color: 'white'\n              },\n              rowStyle: {\n                fontSize: 14\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: grabarVariantes,\n            children: \"Grabar cambios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Orders, \"AEtQysJegu887+JGDYyifGRvFJI=\");\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["C:/ProyectosProductivos/backendcyclewear/backend/src/components/sales/orders.js"],"names":["React","Fragment","useEffect","useState","ReactHTMLTableToExcel","MaterialTable","axios","Breadcrumb","data","Datatable","Card","CardBody","CardHeader","Col","Container","Form","FormGroup","Input","Label","Row","Button","Modal","ModalFooter","ModalHeader","ModalBody","swal","Loading","EditIcon","EditAttributesIcon","Orders","lisPedidos","setListPedidos","pedidoSeleccionado","setPedidoSeleccionado","lisItemsPedidos","setLisItemsPedidos","listItemsPedidoSeleccionado","setListItemsPedidoSeleccionado","modalVariantes","setModalVariantes","newDet","contador","contadordos","leePedidos","params","pedido","method","url","then","res","catch","error","console","log","leeItemsPedidos","seleccionarPedido","caso","map","row","index","id_fact","item","advert_code","advert_name","brand_name","codigoproductosiigo","direccion","itempedido","observaciones","price","quantity","subtotal","tax_total","taxon_name","total","variant_barcode","variant_name","variant_sku","push","setList","abrirCerrarModalVariantes","grabarVariantes","columnas","title","field","itemspedidos","icon","tooltip","onClick","event","rowData","actionsColumnIndex","headerStyle","backgroundColor","fontSize","color","rowStyle","onRowUpdate","newData","oldData","Promise","resolve","reject","setTimeout","dataUpdate","tableData","id"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\r\nimport ReactHTMLTableToExcel from \"react-html-table-to-excel\";\r\nimport MaterialTable from \"material-table\";\r\nimport axios from \"axios\";\r\nimport Breadcrumb from \"../common/breadcrumb\";\r\nimport data from \"../../assets/data/orders\";\r\nimport Datatable from \"../common/datatable\";\r\nimport {\r\n\tCard, CardBody, CardHeader, Col, Container, Form, FormGroup, Input, Label, Row, Button, Modal, ModalFooter,\r\n\tModalHeader, ModalBody\r\n} from \"reactstrap\";\r\nimport swal from \"sweetalert\";\r\nimport Loading from '../elements/Loading/Loading';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport EditAttributesIcon from '@material-ui/icons/EditAttributes';\r\n\r\nconst Orders = () => {\r\n\tconst [lisPedidos, setListPedidos] = useState([]);\r\n\tconst [pedidoSeleccionado, setPedidoSeleccionado] = useState([]);\r\n\tconst [lisItemsPedidos, setLisItemsPedidos] = useState([]);\r\n\tconst [listItemsPedidoSeleccionado, setListItemsPedidoSeleccionado] = useState([]);\r\n\tconst [modalVariantes, setModalVariantes] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newDet = [];\r\n\t\tlet contador = 0;\r\n\t\tlet contadordos = 0;\r\n\r\n\t\tconst leePedidos = async () => {\r\n\t\t\t//setLoading(true);\r\n\t\t\tconst params = {\r\n\t\t\t\tpedido: 0\r\n\t\t\t}\r\n\t\t\t//console.log(\"FECHA \", params);\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: 'https://sitbusiness.co/cyclewear/api/210', params\r\n\t\t\t}).then(res => {\r\n\t\t\t\t//console.log(\"PEDIDOS : \", res.data)\r\n\t\t\t\tsetListPedidos(res.data);\r\n\t\t\t}\r\n\t\t\t).catch(function (error) {\r\n\t\t\t\tconsole.log(\"ERROR LEYENDO PEDIDOS\");\r\n\t\t\t})\r\n\t\t}\r\n\t\tleePedidos();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newDet = [];\r\n\t\tlet contador = 0;\r\n\t\tlet contadordos = 0;\r\n\r\n\t\tconst leeItemsPedidos = async () => {\r\n\t\t\t//setLoading(true);\r\n\t\t\tconst params = {\r\n\t\t\t\tpedido: 0\r\n\t\t\t}\r\n\t\t\t//console.log(\"FECHA \", params);\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: 'get',\r\n\t\t\t\turl: 'https://sitbusiness.co/cyclewear/api/211', params\r\n\t\t\t}).then(res => {\r\n\t\t\t\t//console.log(\"PEDIDOS : \", res.data)\r\n\t\t\t\tsetLisItemsPedidos(res.data);\r\n\t\t\t}\r\n\t\t\t).catch(function (error) {\r\n\t\t\t\tconsole.log(\"ERROR LEYENDO ITEMS PEDIDOS\");\r\n\t\t\t})\r\n\t\t}\r\n\t\tleeItemsPedidos();\r\n\t}, []);\r\n\r\n\r\n\tconst seleccionarPedido = (pedido, caso) => {\r\n\t\tconsole.log(\"PEDIDO : \", pedido);\r\n\t\tsetPedidoSeleccionado(pedido);\r\n\t\tconsole.log(\"ITEMS PEDIDOS : \", lisItemsPedidos);\r\n\r\n\t\tconst newDet = [];\r\n\t\t{\r\n\t\t\tlisItemsPedidos && lisItemsPedidos.map((row, index) => {\r\n\t\t\t\t{\r\n\t\t\t\t\t//console.log(\"INTERNO VARIANTE : \", variante.idinterno)\r\n\t\t\t\t\tif (pedido.id_fact == row.pedido) {\r\n\t\t\t\t\t\tlet item = {\r\n\t\t\t\t\t\t\tadvert_code: row.advert_code,\r\n\t\t\t\t\t\t\tadvert_name: row.advert_name,\r\n\t\t\t\t\t\t\tbrand_name: row.brand_name,\r\n\t\t\t\t\t\t\tcodigoproductosiigo: row.codigoproductosiigo,\r\n\t\t\t\t\t\t\tdireccion: row.direccion,\r\n\t\t\t\t\t\t\titempedido: row.itempedido,\r\n\t\t\t\t\t\t\tobservaciones: row.observaciones,\r\n\t\t\t\t\t\t\tpedido: row.pedido,\r\n\t\t\t\t\t\t\tprice: row.price,\r\n\t\t\t\t\t\t\tquantity: row.quantity,\r\n\t\t\t\t\t\t\tsubtotal: row.subtotal,\r\n\t\t\t\t\t\t\ttax_total: row.tax_total,\r\n\t\t\t\t\t\t\ttaxon_name: row.taxon_name,\r\n\t\t\t\t\t\t\ttotal: row.total,\r\n\t\t\t\t\t\t\tvariant_barcode: row.variant_barcode,\r\n\t\t\t\t\t\t\tvariant_name: row.variant_name,\r\n\t\t\t\t\t\t\tvariant_sku: row.variant_sku\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tnewDet.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tconsole.log(\"NUEVO ARREGLO VARIANTE : \", newDet);\r\n\t\tsetList(newDet);\r\n\r\n\t\t(caso === \"Pedido\") ? abrirCerrarModalVariantes() : abrirCerrarModalVariantes()\r\n\t}\r\n\r\n\tconst abrirCerrarModalVariantes = () => {\r\n\t\tsetModalVariantes(!modalVariantes);\r\n\t}\r\n\r\n\tconst grabarVariantes = () => {\r\n\r\n\t\tconsole.log(\"DATOS VARIANTEs : \", listItemsPedidoSeleccionado)\r\n\t}\r\n\r\n\tconst columnas = [\r\n\t\t{\r\n\t\t\ttitle: 'Id Pedido',\r\n\t\t\tfield: 'id_fact'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Id Siigo',\r\n\t\t\tfield: 'id_siigo'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Factura Siigo',\r\n\t\t\tfield: 'facturasiigo'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Fecha Pedido',\r\n\t\t\tfield: 'fechafactura'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Id Cliente',\r\n\t\t\tfield: 'idcliente'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Valor Factura',\r\n\t\t\tfield: 'valorfactura'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Descuento',\r\n\t\t\tfield: 'descuento'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Observacion',\r\n\t\t\tfield: 'observaciones'\r\n\t\t},\r\n\r\n\t]\r\n\r\n\tconst itemspedidos = [\r\n\t\t{\r\n\t\t\ttitle: 'Item Pedido',\r\n\t\t\tfield: 'itempedido'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'AdvertName',\r\n\t\t\tfield: 'advert_code'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'AdvertCode',\r\n\t\t\tfield: 'advert_code'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Marca',\r\n\t\t\tfield: 'brand_name'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Valor',\r\n\t\t\tfield: 'price'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Cantidad',\r\n\t\t\tfield: 'quantity'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Nombre Variante',\r\n\t\t\tfield: 'variant_name'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Codio de Barra',\r\n\t\t\tfield: 'variant_barcode'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'SKU',\r\n\t\t\tfield: 'variant_sku'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'CodigoSiigo',\r\n\t\t\tfield: 'codigoproductosiigo'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Direccion',\r\n\t\t\tfield: 'direccion'\r\n\t\t},\r\n\t]\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Breadcrumb title=\"Pedidos Bike Exchange\" parent=\"Sales\" />\r\n\t\t\t<Container fluid={true}>\r\n\t\t\t\t<MaterialTable\r\n\t\t\t\t\ttitle=\"Pedidos Cycle Wear\"\r\n\t\t\t\t\tcolumns={columnas}\r\n\t\t\t\t\tdata={lisPedidos}\r\n\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ticon: EditIcon,\r\n\t\t\t\t\t\t\ttooltip: 'Editar Producto',\r\n\t\t\t\t\t\t\tonClick: (event, rowData) => seleccionarPedido(rowData, \"Pedido\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ticon: EditAttributesIcon,\r\n\t\t\t\t\t\t\ttooltip: 'Variante Producto',\r\n\t\t\t\t\t\t\tonClick: (event, rowData) => seleccionarPedido(rowData, \"Variante\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tactionsColumnIndex: 11,\r\n\t\t\t\t\t\theaderStyle: { backgroundColor: '#015CAB', fontSize: 16, color: 'white' },\r\n\t\t\t\t\t\trowStyle: {\r\n\t\t\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<Modal className=\"custom-modal-style\" isOpen={modalVariantes} toggle={abrirCerrarModalVariantes}>\r\n\t\t\t\t\t<ModalHeader\r\n\t\t\t\t\t\ttoggle={abrirCerrarModalVariantes}>\r\n\t\t\t\t\t\t<div className=\"centrartextomodalvariantes\">\r\n\t\t\t\t\t\t\tCONSULTAR VARIANTES PRODUCTOS\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</ModalHeader>\r\n\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t<MaterialTable\r\n\t\t\t\t\t\t\ttitle=\"Productos Cycle Wear\"\r\n\t\t\t\t\t\t\tcolumns={itemspedidos}\r\n\t\t\t\t\t\t\tdata={listItemsPedidoSeleccionado}\r\n\t\t\t\t\t\t\teditable={{\r\n\r\n\t\t\t\t\t\t\t\tonRowUpdate: (newData, oldData) =>\r\n\t\t\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst dataUpdate = [...listItemsPedidoSeleccionado];\r\n\t\t\t\t\t\t\t\t\t\t\tconst index = oldData.tableData.id;\r\n\t\t\t\t\t\t\t\t\t\t\tdataUpdate[index] = newData;\r\n\t\t\t\t\t\t\t\t\t\t\tsetListItemsPedidoSeleccionado([...dataUpdate]);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t\t\t\t}),\r\n\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\tactionsColumnIndex: 11,\r\n\t\t\t\t\t\t\t\theaderStyle: { backgroundColor: '#015CAB', fontSize: 16, color: 'white' },\r\n\t\t\t\t\t\t\t\trowStyle: {\r\n\t\t\t\t\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ModalBody>\r\n\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t<Button color=\"primary\" onClick={grabarVariantes}>Grabar cambios</Button>\r\n\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Container>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default Orders;\r\n"]},"metadata":{},"sourceType":"module"}